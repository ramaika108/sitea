{"ast":null,"code":"import _slicedToArray from\"/home/ydv/projects/ezichestvo/ts/malenko/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Fetch from\"../components/Fetch\";import arrow from'../images/arrow.png';import calendarezki from'../images/predictor.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Horoscope=function Horoscope(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showDetails=_useState2[0],setShowDetails=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),horoscope=_useState4[0],setHoroscope=_useState4[1];var randomAngle=Math.random()*(800-180)+180;useEffect(function(){var shownToday=wasShownToday();if(shownToday)showCached();},[]);var wasShownToday=function wasShownToday(){var currentDate=new Date().setHours(0,0,0,0).toString();var lastShownDate=localStorage.getItem('horoscopeDate');if(currentDate===lastShownDate)return true;return false;};var showCached=function showCached(){setShowDetails(true);var storedHoroscope=localStorage.getItem('horoscope');var storedAngle=localStorage.getItem('arrowAngle');if(storedHoroscope){var tmpHoroscope=JSON.parse(storedHoroscope);setHoroscope(tmpHoroscope);}if(storedAngle){randomAngle=+storedAngle;}};var showNew=function showNew(){Fetch('/api/v1/horoscope',setHoroscope);setShowDetails(true);localStorage.setItem('horoscopeDate',new Date().setHours(0,0,0,0).toString());localStorage.setItem('arrowAngle',randomAngle.toString());};useEffect(function(){if(horoscope){localStorage.setItem('horoscope',JSON.stringify(horoscope));}},[horoscope]);return/*#__PURE__*/_jsx(\"main\",{className:\"horoscope-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0401\\u0436\\u0438\\u0434\\u043D\\u0435\\u0432\\u043D\\u044B\\u0439 \\u0433\\u043E\\u0440\\u043E\\u0441\\u043A\\u043E\\u043F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"horoscope__content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content__wheel\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"wheel__options\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u0425\\u043E\\u0440\\u043E\\u0448\\u043E\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u041F\\u043B\\u043E\\u0445\\u043E\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u041D\\u043E\\u0440\\u043C\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u041A\\u0430\\u043A \\u043E\\u0431\\u044B\\u0447\\u043D\\u043E\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0425\\u0417\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u041E\\u0431\\u0430\\u043B\\u0434\\u0435\\u043D\\u043D\\u043E\"})]}),/*#__PURE__*/_jsx(\"img\",{src:arrow,alt:\"\\u0421\\u0442\\u0440\\u0435\\u043B\\u043A\\u0430 \\u0441\\u0443\\u0434\\u044C\\u0431\\u044B\",style:{transform:showDetails?\"rotate(\".concat(randomAngle,\"deg)\"):'none'}}),!showDetails&&/*#__PURE__*/_jsx(\"button\",{className:\"horoscope_button\",onClick:showNew,children:\"\\u041A\\u0440\\u0443\\u0442\\u043D\\u0443\\u0442\\u044C\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content__desc\",children:[/*#__PURE__*/_jsx(\"p\",{children:showDetails?'Приходите за следующим предсказанием завтра':'Внимание этот очень технологичный прибор может предсказать то как пройдет ваш день. Предупреждаю, его предсказания сбываются всегда, как говорится “Не сегодня так завтра...”'}),/*#__PURE__*/_jsx(\"img\",{src:calendarezki,alt:\"\\u041E\\u043F\\u0435\\u0440\\u0435\\u0430\\u0442\\u043E\\u0440 \\u0433\\u043E\\u0440\\u043E\\u0441\\u043A\\u043E\\u043F\\u0430\"}),showDetails&&/*#__PURE__*/_jsxs(\"div\",{className:\"horoscope-detail-wrapper\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0414\\u0435\\u0442\\u0430\\u043B\\u044C\\u043D\\u044B\\u0439 \\u0440\\u0430\\u0437\\u0431\\u043E\\u0440:\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u041F\\u043E\\u0433\\u043E\\u0434\\u0430: \",horoscope===null||horoscope===void 0?void 0:horoscope.weather]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0435\\u043D\\u0438\\u0435: \",horoscope===null||horoscope===void 0?void 0:horoscope.mood]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0417\\u0430\\u0432\\u0442\\u0440\\u0430\\u043A: \",horoscope===null||horoscope===void 0?void 0:horoscope.breakfast]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u041E\\u0431\\u0435\\u0434: \",horoscope===null||horoscope===void 0?void 0:horoscope.lunch]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0423\\u0436\\u0438\\u043D: \",horoscope===null||horoscope===void 0?void 0:horoscope.supper]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u041D\\u043E\\u0447\\u043D\\u043E\\u0439 \\u0434\\u043E\\u0436\\u043E\\u0440: \",horoscope===null||horoscope===void 0?void 0:horoscope.night]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0412\\u0430\\u0436\\u043D\\u044B\\u0435 \\u0434\\u0435\\u043B\\u0430: \",horoscope===null||horoscope===void 0?void 0:horoscope.tasks]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0414\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0435 \\u0441\\u043E\\u0432\\u0435\\u0442\\u044B: \",horoscope===null||horoscope===void 0?void 0:horoscope.advise]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u041F\\u043E\\u043A\\u0440\\u043E\\u0432\\u0438\\u0442\\u0435\\u043B\\u044C \\u0434\\u043D\\u044F: \",horoscope===null||horoscope===void 0?void 0:horoscope.pokrov]})]})]})]})]})]})});};export default Horoscope;","map":{"version":3,"names":["useState","useEffect","Fetch","arrow","calendarezki","Horoscope","showDetails","setShowDetails","horoscope","setHoroscope","randomAngle","Math","random","shownToday","wasShownToday","showCached","currentDate","Date","setHours","toString","lastShownDate","localStorage","getItem","storedHoroscope","storedAngle","tmpHoroscope","JSON","parse","showNew","setItem","stringify","transform","weather","mood","breakfast","lunch","supper","night","tasks","advise","pokrov"],"sources":["/home/ydv/projects/ezichestvo/ts/malenko/frontend/src/pages/Horoscope.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport Fetch from \"../components/Fetch\";\n\nimport arrow from '../images/arrow.png';\nimport calendarezki from '../images/predictor.png';\n\nimport { HoroscopeType } from '../components/types';\n\nconst Horoscope = () => {\n\n    const [showDetails, setShowDetails] = useState(false)\n    const [horoscope, setHoroscope] = useState<HoroscopeType>()\n\n    let randomAngle = Math.random() * (800 - 180) + 180\n\n    useEffect(() => {\n        let shownToday = wasShownToday()\n        if (shownToday) showCached()\n    }, [])\n\n    const wasShownToday = () => {\n        let currentDate =  new Date().setHours(0,0,0,0).toString()\n        let lastShownDate = localStorage.getItem('horoscopeDate')\n        if (currentDate === lastShownDate) return true\n        return false\n    }\n\n    const showCached = () => {\n        setShowDetails(true)\n        let storedHoroscope:string|null= localStorage.getItem('horoscope')\n        let storedAngle:string|null= localStorage.getItem('arrowAngle')\n        if (storedHoroscope) {\n            let tmpHoroscope:HoroscopeType = JSON.parse(storedHoroscope)\n            setHoroscope(tmpHoroscope)\n        }\n        if (storedAngle) {\n            randomAngle = +storedAngle\n        }\n    }\n\n    const showNew = () => {\n        Fetch('/api/v1/horoscope', setHoroscope)\n        setShowDetails(true)\n        localStorage.setItem('horoscopeDate', new Date().setHours(0,0,0,0).toString())\n        localStorage.setItem('arrowAngle', randomAngle.toString())\n    }\n\n    useEffect(() => {\n        if (horoscope){\n            localStorage.setItem('horoscope', JSON.stringify(horoscope))\n        }\n    }, [horoscope])\n\n    return(\n        <main className='horoscope-page'>\n\n            <div className=\"container\">\n                <h3>Ёжидневный гороскоп</h3>\n\n\t\t\t\t\t<div className=\"horoscope__content\">\n\t\t\t\t\t\t<div className=\"content__wheel\">\n\t\t\t\t\t\t\t<ul className=\"wheel__options\">\n\t\t\t\t\t\t\t\t<li>Хорошо</li>\n\t\t\t\t\t\t\t\t<li>Плохо</li>\n\t\t\t\t\t\t\t\t<li>Норм</li>\n\t\t\t\t\t\t\t\t<li>Как обычно</li>\n\t\t\t\t\t\t\t\t<li>ХЗ</li>\n\t\t\t\t\t\t\t\t<li>Обалденно</li>\n\t\t\t\t\t\t\t</ul>\n                            <img src={arrow} alt=\"Стрелка судьбы\" style={{transform: showDetails ? `rotate(${randomAngle}deg)` : 'none'}} />\n                            {!showDetails && <button className=\"horoscope_button\" onClick={showNew}>Крутнуть</button>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"content__desc\">\n                            <p>{showDetails ? 'Приходите за следующим предсказанием завтра' : 'Внимание этот очень технологичный прибор может предсказать то как пройдет ваш день. Предупреждаю, его предсказания сбываются всегда, как говорится “Не сегодня так завтра...”'}</p>\n                            <img src={calendarezki} alt=\"Опереатор гороскопа\" />\n                            {showDetails && (<div className=\"horoscope-detail-wrapper\">\n\t\t\t\t\t\t\t<h4>Детальный разбор:</h4>\n\t\t\t\t\t\t\t<ul>\n                                <li>Погода: {horoscope?.weather}</li>\n                                <li>Настроение: {horoscope?.mood}</li>\n                                <li>Завтрак: {horoscope?.breakfast}</li>\n                                <li>Обед: {horoscope?.lunch}</li>\n                                <li>Ужин: {horoscope?.supper}</li>\n                                <li>Ночной дожор: {horoscope?.night}</li>\n                                <li>Важные дела: {horoscope?.tasks}</li>\n                                <li>Дополнительные советы: {horoscope?.advise}</li>\n                                <li>Покровитель дня: {horoscope?.pokrov}</li>\n                            </ul>\n                            </div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n            </div>\n        </main>\n    )\n}\n\nexport default Horoscope;\n"],"mappings":"uIAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,MAAP,KAAkB,qBAAlB,CAEA,MAAOC,MAAP,KAAkB,qBAAlB,CACA,MAAOC,aAAP,KAAyB,yBAAzB,C,wFAIA,GAAMC,UAAS,CAAG,QAAZA,UAAY,EAAM,CAEpB,cAAsCL,QAAQ,CAAC,KAAD,CAA9C,wCAAOM,WAAP,eAAoBC,cAApB,eACA,eAAkCP,QAAQ,EAA1C,yCAAOQ,SAAP,eAAkBC,YAAlB,eAEA,GAAIC,YAAW,CAAGC,IAAI,CAACC,MAAL,IAAiB,IAAM,GAAvB,EAA8B,GAAhD,CAEAX,SAAS,CAAC,UAAM,CACZ,GAAIY,WAAU,CAAGC,aAAa,EAA9B,CACA,GAAID,UAAJ,CAAgBE,UAAU,GAC7B,CAHQ,CAGN,EAHM,CAAT,CAKA,GAAMD,cAAa,CAAG,QAAhBA,cAAgB,EAAM,CACxB,GAAIE,YAAW,CAAI,GAAIC,KAAJ,GAAWC,QAAX,CAAoB,CAApB,CAAsB,CAAtB,CAAwB,CAAxB,CAA0B,CAA1B,EAA6BC,QAA7B,EAAnB,CACA,GAAIC,cAAa,CAAGC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAApB,CACA,GAAIN,WAAW,GAAKI,aAApB,CAAmC,MAAO,KAAP,CACnC,MAAO,MAAP,CACH,CALD,CAOA,GAAML,WAAU,CAAG,QAAbA,WAAa,EAAM,CACrBR,cAAc,CAAC,IAAD,CAAd,CACA,GAAIgB,gBAA2B,CAAEF,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAjC,CACA,GAAIE,YAAuB,CAAEH,YAAY,CAACC,OAAb,CAAqB,YAArB,CAA7B,CACA,GAAIC,eAAJ,CAAqB,CACjB,GAAIE,aAA0B,CAAGC,IAAI,CAACC,KAAL,CAAWJ,eAAX,CAAjC,CACAd,YAAY,CAACgB,YAAD,CAAZ,CACH,CACD,GAAID,WAAJ,CAAiB,CACbd,WAAW,CAAG,CAACc,WAAf,CACH,CACJ,CAXD,CAaA,GAAMI,QAAO,CAAG,QAAVA,QAAU,EAAM,CAClB1B,KAAK,CAAC,mBAAD,CAAsBO,YAAtB,CAAL,CACAF,cAAc,CAAC,IAAD,CAAd,CACAc,YAAY,CAACQ,OAAb,CAAqB,eAArB,CAAsC,GAAIZ,KAAJ,GAAWC,QAAX,CAAoB,CAApB,CAAsB,CAAtB,CAAwB,CAAxB,CAA0B,CAA1B,EAA6BC,QAA7B,EAAtC,EACAE,YAAY,CAACQ,OAAb,CAAqB,YAArB,CAAmCnB,WAAW,CAACS,QAAZ,EAAnC,EACH,CALD,CAOAlB,SAAS,CAAC,UAAM,CACZ,GAAIO,SAAJ,CAAc,CACVa,YAAY,CAACQ,OAAb,CAAqB,WAArB,CAAkCH,IAAI,CAACI,SAAL,CAAetB,SAAf,CAAlC,EACH,CACJ,CAJQ,CAIN,CAACA,SAAD,CAJM,CAAT,CAMA,mBACI,aAAM,SAAS,CAAC,gBAAhB,uBAEI,aAAK,SAAS,CAAC,WAAf,wBACI,qIADJ,cAGP,aAAK,SAAS,CAAC,oBAAf,wBACC,aAAK,SAAS,CAAC,gBAAf,wBACC,YAAI,SAAS,CAAC,gBAAd,wBACC,4DADD,cAEC,sDAFD,cAGC,gDAHD,cAIC,+EAJD,cAKC,oCALD,cAMC,8EAND,GADD,cASsB,YAAK,GAAG,CAAEL,KAAV,CAAiB,GAAG,CAAC,iFAArB,CAAsC,KAAK,CAAE,CAAC4B,SAAS,CAAEzB,WAAW,kBAAaI,WAAb,SAAiC,MAAxD,CAA7C,EATtB,CAUuB,CAACJ,WAAD,eAAgB,eAAQ,SAAS,CAAC,kBAAlB,CAAqC,OAAO,CAAEsB,OAA9C,8DAVvC,GADD,cAaC,aAAK,SAAS,CAAC,eAAf,wBACsB,mBAAItB,WAAW,CAAG,6CAAH,CAAmD,+KAAlE,EADtB,cAEsB,YAAK,GAAG,CAAEF,YAAV,CAAwB,GAAG,CAAC,+GAA5B,EAFtB,CAGuBE,WAAW,eAAK,aAAK,SAAS,CAAC,0BAAf,wBACtC,oHADsC,cAEtC,mCACyB,+DAAaE,SAAb,SAAaA,SAAb,iBAAaA,SAAS,CAAEwB,OAAxB,GADzB,cAEyB,uFAAiBxB,SAAjB,SAAiBA,SAAjB,iBAAiBA,SAAS,CAAEyB,IAA5B,GAFzB,cAGyB,qEAAczB,SAAd,SAAcA,SAAd,iBAAcA,SAAS,CAAE0B,SAAzB,GAHzB,cAIyB,mDAAW1B,SAAX,SAAWA,SAAX,iBAAWA,SAAS,CAAE2B,KAAtB,GAJzB,cAKyB,mDAAW3B,SAAX,SAAWA,SAAX,iBAAWA,SAAS,CAAE4B,MAAtB,GALzB,cAMyB,8FAAmB5B,SAAnB,SAAmBA,SAAnB,iBAAmBA,SAAS,CAAE6B,KAA9B,GANzB,cAOyB,wFAAkB7B,SAAlB,SAAkBA,SAAlB,iBAAkBA,SAAS,CAAE8B,KAA7B,GAPzB,cAQyB,oJAA4B9B,SAA5B,SAA4BA,SAA5B,iBAA4BA,SAAS,CAAE+B,MAAvC,GARzB,cASyB,gHAAsB/B,SAAtB,SAAsBA,SAAtB,iBAAsBA,SAAS,CAAEgC,MAAjC,GATzB,GAFsC,GAHvC,GAbD,GAHO,GAFJ,EADJ,CA0CH,CAvFD,CAyFA,cAAenC,UAAf"},"metadata":{},"sourceType":"module"}